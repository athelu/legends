<form class="{{cssClass}} flexcol" autocomplete="off">
  <header class="sheet-header">
    <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" height="64" width="64"/>
    <div class="header-fields">
      <h1 class="charname"><input name="name" type="text" value="{{item.name}}" placeholder="Armor Name"/></h1>
      
      <!-- Armor Property Tags -->
      <div class="armor-tags">
        <!-- Armor Type Tag -->
        {{#if system.armorType}}
          {{#if (eq system.armorType "light")}}
          <span class="tag armor-type-tag">LIGHT ARMOR</span>
          {{/if}}
          {{#if (eq system.armorType "medium")}}
          <span class="tag armor-type-tag">MEDIUM ARMOR</span>
          {{/if}}
          {{#if (eq system.armorType "heavy")}}
          <span class="tag armor-type-tag">HEAVY ARMOR</span>
          {{/if}}
        {{/if}}
        
        <!-- Property Tags (Noisy/Loud) -->
        {{#each system.properties as |prop|}}
          {{#if (eq prop "noisy")}}
          <span class="tag stealth-tag">NOISY</span>
          {{/if}}
          {{#if (eq prop "loud")}}
          <span class="tag stealth-tag">LOUD</span>
          {{/if}}
        {{/each}}
      </div>
      
      <!-- Quick Summary Stats in Header -->
      <div class="armor-summary-row">
        <div class="summary-stat">
          <label>DR</label>
          <span class="value">
            S:{{system.dr.slashing}} P:{{system.dr.piercing}} B:{{system.dr.bludgeoning}}
          </span>
        </div>
        
        <div class="summary-stat">
          <label>Weight</label>
          <span class="value">{{system.weight}} lbs</span>
        </div>
        
        <div class="summary-stat">
          <label>Cost</label>
          <span class="value">{{system.cost}} gp</span>
        </div>
        
        <div class="summary-stat editable">
          <label>Qty</label>
          <input type="number" name="system.quantity" value="{{system.quantity}}" data-dtype="Number" min="0" class="qty-input" />
        </div>
      </div>
    </div>
  </header>

  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="description">Description</a>
    <a class="item" data-tab="details">Details</a>
  </nav>

  <section class="sheet-body">
    <!-- Description Tab -->
    <div class="tab description" data-group="primary" data-tab="description">
      {{editor enrichedDescription target="system.description.value" button=true owner=owner editable=editable}}
    </div>

    <!-- Details Tab -->
    <div class="tab details" data-group="primary" data-tab="details">
      
      <!-- Armor Type -->
      <div class="form-group">
        <label>Armor Type</label>
        <select name="system.armorType" class="armor-type-select">
          <option value="light" {{#if (eq system.armorType "light")}}selected{{/if}}>Light Armor</option>
          <option value="medium" {{#if (eq system.armorType "medium")}}selected{{/if}}>Medium Armor</option>
          <option value="heavy" {{#if (eq system.armorType "heavy")}}selected{{/if}}>Heavy Armor</option>
        </select>
      </div>

      <!-- ARMOR-ONLY FIELDS (hidden for shields) -->
      <div class="armor-only-fields">
        
        <!-- Damage Reduction -->
        <h3>Damage Reduction (DR)</h3>
        <div class="form-group-row">
          <div class="form-group">
            <label>Slashing DR</label>
            <input type="number" name="system.dr.slashing" value="{{system.dr.slashing}}" data-dtype="Number" min="0" />
            <small>Default damage type</small>
          </div>
          <div class="form-group">
            <label>Piercing DR</label>
            <input type="number" name="system.dr.piercing" value="{{system.dr.piercing}}" data-dtype="Number" min="0" />
          </div>
          <div class="form-group">
            <label>Bludgeoning DR</label>
            <input type="number" name="system.dr.bludgeoning" value="{{system.dr.bludgeoning}}" data-dtype="Number" min="0" />
          </div>
        </div>

        <!-- Help Section -->
        <div class="help-section" style="background: #f7fafc; padding: 10px; border-radius: 4px; margin: 10px 0;">
          <h4 style="margin: 0 0 5px 0;">Armor DR Values</h4>
          <ul style="margin: 5px 0; padding-left: 20px; font-size: 12px;">
            <li><strong>Slashing DR</strong>: Default protection (primary damage type)</li>
            <li><strong>Piercing DR</strong>: Protection against piercing damage</li>
            <li><strong>Bludgeoning DR</strong>: Protection against bludgeoning damage</li>
          </ul>
          <p style="margin: 5px 0; font-size: 11px; font-style: italic;">
            Example: Chain Mail has Slashing DR 5, Piercing DR 5, Bludgeoning DR 4
          </p>
        </div>

        <!-- Stealth Penalty -->
        <h3>Stealth Penalty</h3>
        <div class="form-group">
          <label>Stealth Penalty Type</label>
          <select name="system.stealthPenalty" class="stealth-penalty-select">
            <option value="none" {{#if (eq system.stealthPenalty "none")}}selected{{/if}}>None (No penalty)</option>
            <option value="noisy" {{#if (eq system.stealthPenalty "noisy")}}selected{{/if}}>Noisy (+1 to both dice on Stealth checks)</option>
            <option value="loud" {{#if (eq system.stealthPenalty "loud")}}selected{{/if}}>Loud (+2 to both dice on Stealth checks)</option>
          </select>
          <small>Stealth penalty applies when wearing this armor</small>
        </div>

        <!-- Don/Doff Time -->
        <h3>Don/Doff Time</h3>
        <p style="font-size: 12px; margin-bottom: 10px;">Don/Doff times and swim penalties are auto-determined by armor type.</p>
        <div class="form-group-row">
          <div class="form-group">
            <label>Don Time</label>
            <input type="text" name="system.donTime" value="{{system.donTime}}" placeholder="Auto-computed" readonly />
            <small>Automatically set by armor type</small>
          </div>
          <div class="form-group">
            <label>Doff Time</label>
            <input type="text" name="system.doffTime" value="{{system.doffTime}}" placeholder="Auto-computed" readonly />
            <small>Automatically set by armor type</small>
          </div>
        </div>

        <!-- Swim Penalty -->
        <div class="form-group">
          <label>Swim Penalty</label>
          <input type="text" name="system.swimPenalty" value="{{system.swimPenalty}}" placeholder="Auto-computed" readonly />
          <small>Automatically determined by armor type</small>
        </div>
      </div>

      <!-- Physical Properties -->
      <div class="form-group-row">
        <div class="form-group">
          <label>Weight (lbs)</label>
          <input type="number" name="system.weight" value="{{system.weight}}" data-dtype="Number" step="0.1" min="0" />
        </div>
        <div class="form-group">
          <label>Cost (gp)</label>
          <input type="number" name="system.cost" value="{{system.cost}}" data-dtype="Number" min="0" />
        </div>
        <div class="form-group">
          <label>Quantity</label>
          <input type="number" name="system.quantity" value="{{system.quantity}}" data-dtype="Number" min="0" />
        </div>
      </div>

      <!-- Notes -->
      <div class="form-group">
        <label>Notes</label>
        <textarea name="system.notes" rows="3" placeholder="Additional notes about this armor">{{system.notes}}</textarea>
      </div>

    </div>
  </section>
</form>
